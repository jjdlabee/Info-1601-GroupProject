<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Recipes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
<body>

  <div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
    <br>
    <a href="index.html">Home</a>
    <br>
    <a href="javascript:catBackBtn();">Categories</a>
    <br>
    <a href="javascript:AllRecipes();" id="showAll">All Recipes</a>
    <br>
    <a href="#" id="loginBtn">Login</a>
    <br>
    <a href="#" id="logoutBtn">Logout</a>
    <br>
    <p id="user">
      Welcome Anonymous
    </p>
    <br>
    <a href="index.html" id="a1">
      <img src="logo.png" alt="Your Logo">
    </a>
    
  </div>
  
  <div class="category-main" id="main">
    <button class="openbtn" id="button" onclick="openNav()">☰ MENU</ion-icon></button>  
  
    <div class="category-head" id="head">
      
        <h1 class="head-text" id="head-text">Lets see...LOADING...</h1>
     
      <div class="example" id="search-bar">
        <input type="text" placeholder="Search Categories.." id="searchKey">
        <button onclick=searchCategories() ><i class="fa fa-search"></i></button>
      </div>
      
    </div>
    
    <div class="category-content" id="content">
      <div class="card">
        <img src="#" alt="Loading..." style="width:100%">
        <h1>Loading...</h1>
        <p class="title">Details:</p>
        <p class="details">Loading...</p>
        <button id="show-details"> Loading...</button>
        <p><button>Loading...</button></p>
      </div>


    </div>
    
  </div>

  <script src="script.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>


  <script type="module">
    import { signIn, logout, auth, setAuthListeners } from './auth.js';

      let loginBtn = document.querySelector('#loginBtn');
      let logoutBtn = document.querySelector('#logoutBtn');
      let showAll= document.querySelector('#showAll');
      

      async function setLoggedInUI(){
        console.log("login")
          
          wait();
          getAllRecipesIn();
          document.querySelector('#loginBtn').style.display = 'none';
          document.querySelector('#logoutBtn').style.display = 'inline-block';
          document.querySelector('#showAll').style.display = 'inline-block';
          document.querySelector('#user').style.display = 'inline-block';
          document.querySelector('#user').style.color = '#000080';
      }

      async function setLoggedOutUI(){
          wait();
          getAllRecipesOut();
          document.querySelector('#loginBtn').style.display = 'inline-block';
          document.querySelector('#logoutBtn').style.display = 'none';
          document.querySelector('#showAll').style.display = 'none';
      }

      //attatch listeners
      logoutBtn.addEventListener('click', logout);
      loginBtn.addEventListener('click', signIn);
      showAll.addEventListener('click', signIn);
      setAuthListeners(setLoggedInUI, setLoggedOutUI);

      function wait(){
        let card= document.querySelector('#content');

        let html = '';

        html = `
          <div class="card">
          <img src="#" alt="Loading..." style="width:100%">
          <h1>Loading...</h1>
          <p class="title">Details:</p>
          <p class="details">Loading...</p>
          <button id="show-details"> Loading...</button>
          <p><button>Loading...</button></p>
        </div>
        `;

        card.innerHTML = html;
      }
  </script>
</body>
</html> 
